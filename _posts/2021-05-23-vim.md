---
layout: post
title: vim基本操作
tags: linux
---
# vim基本操作命令
## 进入相关的编辑模式命令
基本上 vi/vim 共分为三种模式，分别是**命令模式**（Command mode），**输入模式**（Insert mode）和**底线命令模式**（Last line mode）。 这三种模式的作用分别是：

命令模式：
用户刚刚启动 vi/vim，便进入了命令模式。
此状态下敲击键盘动作会被Vim识别为命令，而非输入字符。比如我们此时按下i，并不会输入一个字符，i被当作了一个命令。
1. i 为『从目前光标所在处输入』， I 为『在目前所在行的第一个非空格符处开始输入』
2. a 为『从目前光标所在的下一个字符处开始输入』， A 为『从光标所在行的最后一个字符处开始输入』
3. 这是英文字母 o 的大小写。o 为在目前光标所在的下一行处输入新的一行； O 为在目前光标所在的上一行处输入新的一行！
命令模式只有一些最基本的命令，因此仍要依靠底线命令模式输入更多命令。

输入模式:ESC，退出输入模式，切换到命令模式

底线命令模式:

在命令模式下按下:（英文冒号）就进入了底线命令模式。

底线命令模式可以输入单个或多个字符的命令，可用的命令非常多。

在底线命令模式中，基本的命令有（已经省略了冒号）：

q 退出程序

w 保存文件

## 复制
yy  复制游标所在行整行 

        2yy或y2y    复制 2 行

        y^    复制至行首，或y0

        y$    复制至行尾

        yw    复制一个word

        y2w    复制两个word 

        yG    复制至文件尾

        y1G    复制至文件首

当复制的行很多推荐下面的操作：

即将９到15行的内容复制到16行后面

：9，15 copy 16 或 ：9，15 co 16

## 剪切
 dd    剪切游标所在行整行 

​        d^    剪切至行首，或d0

​        d$    剪切至行尾 

​        dw    剪切一个word 

​        dG    剪切至文件尾

当要剪切很多行推荐使用：

：9，15 move 16  或 :9,15 m 16

将第9行到第15行的文本内容移动到第16行的后面 

## 粘贴
 小p:将复制的内容粘贴到光标所在的下一行 

 大P:将复制的内容粘贴到光标所在的上一行 

## 光标位置
1.跳到文本的最后一行：按“G”,即“shift+g”

2.跳到最后一行的最后一个字符 ： 先重复1的操作即按“G”，之后按“$”键，即“shift+4”。

3.跳到第一行的第一个字符：先按两次“g”，

4.跳转到当前行的第一个字符：在当前行按“0”。

## 回退和前进
u:回退一步

crtl+r:前进一步

## 光标移动
命令模式下：kjhl表示上下左右移动

输入模式下:上下左右键进行移动

可以在底线模式下输入命令：:n，进入到n行

## 多行缩进和删除多行前面的空格
删除空格：ctrl+v进入块模式，然后上下左右移动，选中多行以及多个空格，按d即可进行删除，注意此时上下左右移动只能用kjhl键．
多行缩进：
1. ESC之后，ctrl+v进入多行行首选中模式
2. 使用上下键进行上下移动，选中多行行首
3. shift+i，进入插入模式
4. 连续敲击4个空格（注意在敲击空格按键的时候，注意这个时候不能够多行立即缩进，显示的是仅仅一行进行缩进，在执行第五步的时候，才会出现多行缩进的效果）
5. 然后按esc按键，即可发现，你选中的行都缩进了

## 多行注释：
  1. 首先按esc进入命令行模式下，按下Ctrl + v，进入列（也叫区块）模式;
  2. 在行首使用上下键选择需要注释的多行;
  3. 按下键盘（大写）“I”键，进入插入模式；
  4. 然后输入注释符（“//”、“#”等）;
  5. 最后按下“Esc”键。 注：在按下esc键后，会稍等一会才会出现注释，不要着急 \~~时间很短的

  需要注意的是除了输入#号之外，是可以输入任意字符和汉字的，该方案也可以用可视行+normal实现，具体做法是：
  1. 按shift+v进入可视行，选中多行区域
  2. 按冒号进入底线模式，输入normal，如果是在多行前面加信息，就用I+信息，在尾部就用A+信息。例如normal I#，即加入#在多行的前面，normal A#，则在多行的尾部加入数据。

注意：但是要删除多行的相同信息，比如同时去掉#，那么一般用可视块选中按d就可以了，总是可视块和可视行功能很强大，实现相应的功能需要自己总结分析。可视块的功能可能更加强大，它可以在任何位置添加多行相同的信息。

## 多行删除
1.首先在命令模式下，输入“：set nu”显示行号； 2.通过行号确定你要删除的行； 3.命令输入“：32,65d”,回车键，32-65行就被删除了，很快捷吧
如果无意中删除错了，可以使用‘u’键恢复（命令模式下）

## 其他说明
,sa:全选，然后按yy可以复制全部内容

crtl+o:光标返回至前一个位置

crtl+i:光标返回至后一个位置

注意：ctrl+v进入可视块，按hjkl进行选择区域，但是选中的是矩形形状，按v是可视界面，按hjkl可进行选择区域，就像鼠标选择一样，选择后按y可以复制该区域，按d可以剪切该区域。与按2yy,2dd等进行相关行的复制不一样的是粘贴过程，具体不一样的地方操作即可看见，主要是格式各位置的不同。与用2yy及2dd相似的操作是可视行模式，按shift+v进入，然后通过j与k键实现选中多行，同理按y复制，按d进行剪切，效果与2yy这些是类似的。

## 分屏操作
:sp 文件名，是实现上下分屏，可通过crtl+j与k键实现屏幕光标的移动，其中sp是split的缩写，可以直接用:split。

:vsp 文件名，实现左右分屏，同样可以通过ctrl+h与l进行屏幕光标位置移动

创建新的未命名的分屏可以直接使用:new或:vsp new

也可以直接用:vsp，则打开和本体一样的副本，即两个屏幕信息一样，且无论光标在那个分屏上进行操作时候，此时两个屏幕都会进行同样的操作。

如何关闭当前分屏：使用:q，我的可以用,q即可，也可以用:close，只留下当前分屏可以用:only

值得注意的是，我们一般都喜欢左右分屏，所以基本上都是使用:vsp命令，但是当打开的新文件总是在左边，那么你需要在运行:vsp命令前，运行:set splitright命令。这样的操作无疑是很麻烦的，因此可以自己重新设置，vimrc的设置中加入如下代码即可：

map sl :set splitright<CR>:vsplit<CR>
map sh :set nosplitright<CR>:vsplit<CR>
map sk :set nosplitbelow<CR>:split<CR>
map sj :set splitbelow<CR>:split<CR>

即实现了s+hjkl实现上下左右快速分屏。但是实现分屏后的内容是一样的，因此可以使用:e 文件名来打开新的文件。

下面的配置是实现分屏幕的大小控制，通过上下左右键来控制，但是这个设置后，用命令:e 文件名打开的文件就不能够通过上下左右键来时间移动，但是可以继续用:e 文件名的方式访问不同路径下的文件，无法直接移动并不重要，可以用下面讲的标签页来实现移动，而且屏幕上方还会显示对应标签的文件名。

map <up> :res +5<CR>
map <down> :res -5<CR>
map <left> :vertical resize -5<CR>
map <right> :vertical resize +5<CR>

## 标签页
新建标签页：使用:tabe 名字，若用:tabe则会创建未命名的标签页，同时也可以用:tabe 文件名，打开已有的文件标签。实现标签的移动要用:+tabnext右移，:-tabnext实现左移，也可以用下面的配置文件实现快捷方式移动：

tn打开新的标签

th左移标签，tl右移标签

map tn :tabe<CR>       
map th :-tabnext<CR>
map tl :+tabnext<CR> 

下面是系统自带的一些关于标签页快捷键的操作功能

:tabn或gt：顺序切换到下一个标签页

:tabp或gT：逆序切换到上一个标签页

:tabfirst或:tabr：移动到第一个标签页

:tablast：移动到最后一个标签页

:tabm n：将本标签页的数字变为n，即交换本标签页和第n的标签页的位置。

##vim书签Mark

参考[mark详解](https://blog.csdn.net/rudy_yuan/article/details/83004721)

## 代码折叠
目前我的vim配置文档是以缩进来进行代码折叠，光标进入到要折叠的起始行，按zc是折叠，zo是打开折叠，也可以直接用za，即若是折叠状态则打开折叠，若是未折叠状态则折叠相应的代码。还有许多折叠方式，需要自行配置，可自行百度，或者打开我的vim找到折叠设置的地方自行设计。

## k-vim配置基本信息

注意, 以下 ',' 代表<leader>

1. 可以自己修改vimrc中配置，决定是否开启鼠标

set mouse-=a           " 鼠标暂不启用, 键盘党....
set mouse=a            " 开启鼠标

2. 退出vim后，内容显示在终端屏幕, 可以用于查看和复制, 如果不需要可以关掉
   好处：误删什么的，如果以前屏幕打开，可以找回....惨痛的经历

set t_ti= t_te=

3. 可以自己修改vimrc决定是否使用方向键进行上下左右移动，默认关闭，强迫自己用 hjkl，可以注解
hjkl  上下左右

map <Left> <Nop>

map <Right> <Nop>

map <Up> <Nop>

map <Down> <Nop>

4. 上排F功能键

F1 废弃这个键,防止调出系统帮助

F2 set nu/nonu,行号开关，用于鼠标复制代码用

F3 set list/nolist,显示可打印字符开关

F4 set wrap/nowrap,换行开关

F5 set paste/nopaste,粘贴模式paste_mode开关,用于有格式的代码粘贴

F6 syntax on/off,语法开关，关闭语法可以加快大文件的展示

F9 tagbar

F10 运行当前文件(quickrun)

5. 分屏移动

ctrl + j/k/h/l   进行上下左右窗口跳转,不需要ctrl+w+jkhl

6. 搜索
space 空格，进入搜索状态
/       同上
,/      去除匹配高亮

## 终端的基本快捷键

ctrl+alt+t是打开一个terminal

Alt + F4 关闭终端 ，即所有标签页，exit命令可关闭当前标签页

ctrl+shift+t是在terminal中打开多个标签

Shift+Ctrl+W 关闭当前标签页

Alt + n 切换到标签n

进入退出终端全屏：f11
